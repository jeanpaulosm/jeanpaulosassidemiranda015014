# =============================================================================
# PSS Backend MT - Artistas e Albuns
# Processo Seletivo Simplificado - Estado de Mato Grosso 2026
# Candidato: Jean Paulo Sassi de Miranda
# =============================================================================

# Application
quarkus.application.name=pss-backend-mt
quarkus.application.version=1.0.0

# HTTP
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:postgres}
quarkus.datasource.password=${DB_PASSWORD:postgres}
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:pss_artistas}
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.min-size=5

# Hibernate - deixando o Flyway cuidar do schema
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy

# =============================================================================
# FLYWAY - Migrations
# =============================================================================
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.locations=db/migration

# =============================================================================
# OpenAPI / Swagger
# =============================================================================
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.path=/q/swagger-ui
quarkus.swagger-ui.always-include=true
quarkus.smallrye-openapi.info-title=PSS Backend MT - API de Artistas e Albuns
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API REST para gerenciamento de artistas e albuns musicais. Desenvolvida para o Processo Seletivo Simplificado do Estado de Mato Grosso 2026.
quarkus.smallrye-openapi.info-contact-name=Jean Paulo Sassi de Miranda
quarkus.smallrye-openapi.info-license-name=MIT

# =============================================================================
# SECURITY - JWT
# =============================================================================
mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.verify.issuer=https://pss-backend-mt.seplag.mt.gov.br
smallrye.jwt.sign.key.location=privateKey.pem
smallrye.jwt.new-token.lifespan=300
smallrye.jwt.new-token.issuer=https://pss-backend-mt.seplag.mt.gov.br

# =============================================================================
# MinIO / S3 - Armazenamento de Imagens
# =============================================================================
quarkus.s3.endpoint-override=${MINIO_ENDPOINT:http://localhost:9000}
quarkus.s3.path-style-access=true
quarkus.s3.aws.region=${AWS_REGION:us-east-1}
quarkus.s3.aws.credentials.type=static
quarkus.s3.aws.credentials.static-provider.access-key-id=${MINIO_ACCESS_KEY:minioadmin}
quarkus.s3.aws.credentials.static-provider.secret-access-key=${MINIO_SECRET_KEY:minioadmin}

# Bucket
app.storage.bucket-name=${STORAGE_BUCKET:album-imagens}
app.storage.presigned-url-expiration-minutes=30

# =============================================================================
# API Externa - Regionais
# =============================================================================
quarkus.rest-client."regionais-api".url=https://integrador-argus-api.geia.vip
quarkus.rest-client."regionais-api".scope=jakarta.inject.Singleton

# Fault Tolerance
mp.fault.tolerance.enabled=true

# =============================================================================
# WebSocket
# =============================================================================
quarkus.websocket.dispatch-to-worker=true
app.websocket.ticket.ttl-seconds=30

# =============================================================================
# Rate Limit Configuration
# =============================================================================
app.rate-limit.max-requests=10
app.rate-limit.window-seconds=60

# =============================================================================
# CORS
# =============================================================================
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ORIGINS:http://localhost:3000,http://localhost:4200,http://localhost:8080}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=location,info
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# =============================================================================
# Dev Profile
# =============================================================================
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.log.category."br.gov.mt.seplag".level=DEBUG
